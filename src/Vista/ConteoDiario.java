package Vista;

import Controlador.ColumnasTablas;
import Controlador.ConteoDiarioControl;
import Controlador.FormatoFechas;
import Controlador.ManejadorFechas;
import Controlador.MyiReportVisor;
import Modelo.ConteoProducto;
import Modelo.MySQLDAO.ConteoProductoDAO;
import Modelo.MySQLDAO.PresentacionDAO;
import Modelo.MySQLDAO.UsuarioDAO;
import java.util.HashMap;
import javax.swing.JOptionPane;
import javax.swing.table.DefaultTableModel;

/**
 *
 * @author Marce
 */
public class ConteoDiario extends javax.swing.JInternalFrame {

    HashMap parametros = new HashMap();
    MyiReportVisor mrv = null;
    DefaultTableModel modelo;

    public ConteoDiario(String usuario) {
        initComponents();
        cargarDatos(usuario);
    }

    public ConteoDiario() {
    }

    public void cargarDatos(String usuario) {
        try {
            new ConteoDiarioControl().cargarComboCategorias(cmbCategorias);
            lblUsuario.setText(usuario);
            titulosContados();
        } catch (Exception e) {
            System.out.println(e.getMessage());
        }
    }

    public void titulosContados() {
        String cabecera[] = {"ID", "PRODUCTO", "PRESENTACION", "CUENTA"};
        modelo = new DefaultTableModel(null, cabecera);
        tblContados.setModel(modelo);
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        ConteosPorFecha = new javax.swing.JDialog();
        jButton1 = new javax.swing.JButton();
        jdcFechas = new com.toedter.calendar.JDateChooser();
        jPanel4 = new javax.swing.JPanel();
        jScrollPane3 = new javax.swing.JScrollPane();
        tblBuscarProductos = new javax.swing.JTable();
        jLabel3 = new javax.swing.JLabel();
        cmbCategorias = new javax.swing.JComboBox<>();
        jLabel8 = new javax.swing.JLabel();
        jLabel9 = new javax.swing.JLabel();
        txtCantidad = new javax.swing.JTextField();
        jPanel1 = new javax.swing.JPanel();
        lblUsuario = new javax.swing.JLabel();
        lblHora = new javax.swing.JLabel();
        jlabelu = new javax.swing.JLabel();
        lblFecha = new javax.swing.JLabel();
        jlabelf = new javax.swing.JLabel();
        jlabelh = new javax.swing.JLabel();
        jPanel3 = new javax.swing.JPanel();
        btnGuardar = new javax.swing.JButton();
        btnQuitar = new javax.swing.JButton();
        btnLimpiar = new javax.swing.JButton();
        jButton6 = new javax.swing.JButton();
        jScrollPane2 = new javax.swing.JScrollPane();
        jTextArea1 = new javax.swing.JTextArea();
        jPanel9 = new javax.swing.JPanel();
        jScrollPane1 = new javax.swing.JScrollPane();
        tblContados = new javax.swing.JTable();
        btnCrearReporte = new javax.swing.JButton();
        jPanel2 = new javax.swing.JPanel();
        btnAgregar = new javax.swing.JButton();
        btnCancelar = new javax.swing.JButton();
        jPanel5 = new javax.swing.JPanel();
        jLabel4 = new javax.swing.JLabel();
        jLabel5 = new javax.swing.JLabel();

        ConteosPorFecha.getContentPane().setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        jButton1.setText("CREAR REPORTE");
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });
        ConteosPorFecha.getContentPane().add(jButton1, new org.netbeans.lib.awtextra.AbsoluteConstraints(240, 170, 220, 40));

        jdcFechas.setFont(new java.awt.Font("Tahoma", 0, 24)); // NOI18N
        ConteosPorFecha.getContentPane().add(jdcFechas, new org.netbeans.lib.awtextra.AbsoluteConstraints(170, 40, 370, 40));

        getContentPane().setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        jPanel4.setBackground(new java.awt.Color(255, 107, 83));
        jPanel4.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        tblBuscarProductos.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null}
            },
            new String [] {
                "Title 1", "Title 2", "Title 3", "Title 4"
            }
        ));
        tblBuscarProductos.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                tblBuscarProductosMouseClicked(evt);
            }
        });
        jScrollPane3.setViewportView(tblBuscarProductos);

        jPanel4.add(jScrollPane3, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 66, 1050, 300));

        jLabel3.setFont(new java.awt.Font("Microsoft Yi Baiti", 0, 36)); // NOI18N
        jLabel3.setForeground(new java.awt.Color(255, 255, 255));
        jLabel3.setText("cantidad");
        jPanel4.add(jLabel3, new org.netbeans.lib.awtextra.AbsoluteConstraints(810, 370, -1, -1));

        cmbCategorias.setBackground(new java.awt.Color(255, 107, 83));
        cmbCategorias.setFont(new java.awt.Font("Microsoft Yi Baiti", 0, 18)); // NOI18N
        cmbCategorias.setForeground(new java.awt.Color(255, 255, 255));
        cmbCategorias.setBorder(null);
        cmbCategorias.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                cmbCategoriasActionPerformed(evt);
            }
        });
        jPanel4.add(cmbCategorias, new org.netbeans.lib.awtextra.AbsoluteConstraints(760, 20, 300, 30));

        jLabel8.setFont(new java.awt.Font("Microsoft Yi Baiti", 0, 24)); // NOI18N
        jLabel8.setForeground(new java.awt.Color(255, 255, 255));
        jLabel8.setText("categoria");
        jPanel4.add(jLabel8, new org.netbeans.lib.awtextra.AbsoluteConstraints(680, 20, -1, -1));

        jLabel9.setFont(new java.awt.Font("Microsoft Yi Baiti", 0, 36)); // NOI18N
        jLabel9.setForeground(new java.awt.Color(255, 255, 255));
        jLabel9.setText("datos de producto");
        jPanel4.add(jLabel9, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 10, -1, -1));

        txtCantidad.setBackground(new java.awt.Color(255, 107, 83));
        txtCantidad.setFont(new java.awt.Font("Microsoft Yi Baiti", 0, 24)); // NOI18N
        txtCantidad.setForeground(new java.awt.Color(255, 255, 255));
        txtCantidad.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(255, 255, 255)));
        txtCantidad.setEnabled(false);
        jPanel4.add(txtCantidad, new org.netbeans.lib.awtextra.AbsoluteConstraints(930, 380, 130, -1));

        getContentPane().add(jPanel4, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 52, 1070, 440));

        jPanel1.setBackground(new java.awt.Color(85, 74, 70));
        jPanel1.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        lblUsuario.setFont(new java.awt.Font("Leelawadee", 0, 24)); // NOI18N
        lblUsuario.setForeground(new java.awt.Color(255, 255, 255));
        lblUsuario.setText("_____");
        jPanel1.add(lblUsuario, new org.netbeans.lib.awtextra.AbsoluteConstraints(100, 10, 200, -1));

        lblHora.setFont(new java.awt.Font("Leelawadee", 0, 24)); // NOI18N
        lblHora.setForeground(new java.awt.Color(255, 255, 255));
        lblHora.setText("____");
        jPanel1.add(lblHora, new org.netbeans.lib.awtextra.AbsoluteConstraints(630, 10, 180, -1));

        jlabelu.setFont(new java.awt.Font("Leelawadee", 0, 24)); // NOI18N
        jlabelu.setForeground(new java.awt.Color(255, 255, 255));
        jlabelu.setText("usuario:");
        jPanel1.add(jlabelu, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 10, -1, -1));

        lblFecha.setFont(new java.awt.Font("Leelawadee", 0, 24)); // NOI18N
        lblFecha.setForeground(new java.awt.Color(255, 255, 255));
        lblFecha.setText("____");
        jPanel1.add(lblFecha, new org.netbeans.lib.awtextra.AbsoluteConstraints(390, 10, 150, -1));

        jlabelf.setFont(new java.awt.Font("Leelawadee", 0, 24)); // NOI18N
        jlabelf.setForeground(new java.awt.Color(255, 255, 255));
        jlabelf.setText("fecha:");
        jPanel1.add(jlabelf, new org.netbeans.lib.awtextra.AbsoluteConstraints(310, 10, -1, -1));

        jlabelh.setFont(new java.awt.Font("Leelawadee", 0, 24)); // NOI18N
        jlabelh.setForeground(new java.awt.Color(255, 255, 255));
        jlabelh.setText("hora:");
        jPanel1.add(jlabelh, new org.netbeans.lib.awtextra.AbsoluteConstraints(560, 10, -1, -1));

        getContentPane().add(jPanel1, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 940, 1430, 50));

        jPanel3.setBackground(new java.awt.Color(239, 239, 239));
        jPanel3.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        btnGuardar.setBackground(new java.awt.Color(8, 102, 0));
        btnGuardar.setFont(new java.awt.Font("Microsoft Yi Baiti", 1, 24)); // NOI18N
        btnGuardar.setForeground(new java.awt.Color(120, 113, 109));
        btnGuardar.setText("guardar");
        btnGuardar.setBorderPainted(false);
        btnGuardar.setContentAreaFilled(false);
        btnGuardar.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        btnGuardar.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);
        btnGuardar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnGuardarActionPerformed(evt);
            }
        });
        jPanel3.add(btnGuardar, new org.netbeans.lib.awtextra.AbsoluteConstraints(240, 270, 120, -1));

        btnQuitar.setBackground(new java.awt.Color(8, 102, 0));
        btnQuitar.setFont(new java.awt.Font("Microsoft Yi Baiti", 1, 24)); // NOI18N
        btnQuitar.setForeground(new java.awt.Color(120, 113, 109));
        btnQuitar.setText("quitar");
        btnQuitar.setBorderPainted(false);
        btnQuitar.setContentAreaFilled(false);
        btnQuitar.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        btnQuitar.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);
        btnQuitar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnQuitarActionPerformed(evt);
            }
        });
        jPanel3.add(btnQuitar, new org.netbeans.lib.awtextra.AbsoluteConstraints(240, 310, 120, -1));

        btnLimpiar.setBackground(new java.awt.Color(8, 102, 0));
        btnLimpiar.setFont(new java.awt.Font("Microsoft Yi Baiti", 1, 24)); // NOI18N
        btnLimpiar.setForeground(new java.awt.Color(120, 113, 109));
        btnLimpiar.setText("limpiar");
        btnLimpiar.setBorderPainted(false);
        btnLimpiar.setContentAreaFilled(false);
        btnLimpiar.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        btnLimpiar.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);
        jPanel3.add(btnLimpiar, new org.netbeans.lib.awtextra.AbsoluteConstraints(240, 350, 120, -1));

        jButton6.setBackground(new java.awt.Color(8, 102, 0));
        jButton6.setFont(new java.awt.Font("Microsoft Yi Baiti", 1, 24)); // NOI18N
        jButton6.setForeground(new java.awt.Color(120, 113, 109));
        jButton6.setText("cancelar");
        jButton6.setBorderPainted(false);
        jButton6.setContentAreaFilled(false);
        jButton6.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        jButton6.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);
        jPanel3.add(jButton6, new org.netbeans.lib.awtextra.AbsoluteConstraints(240, 390, 120, -1));

        jTextArea1.setColumns(20);
        jTextArea1.setLineWrap(true);
        jTextArea1.setRows(5);
        jTextArea1.setText("EN ESTA SECCION APARECEN LOS PRODUCTOS CONTABILIZADOS, PULSE LA OPCION GUARDAR PARA GUARDAR LA CUENTA Y GENERAR UN REPORTE, O SELECCIONE UN PRODUCTO Y PULSE EL BOTON ELIMINAR PARA QUITARLO DE LA LISTA, O SELECCIONE LA OPCION NUEVO PARA BORRAR TODA LA LISTA.");
        jScrollPane2.setViewportView(jTextArea1);

        jPanel3.add(jScrollPane2, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 20, 320, 170));

        getContentPane().add(jPanel3, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 490, 360, 450));

        jPanel9.setBackground(new java.awt.Color(120, 113, 109));
        jPanel9.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        tblContados.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null}
            },
            new String [] {
                "Title 1", "Title 2", "Title 3", "Title 4"
            }
        ));
        jScrollPane1.setViewportView(tblContados);

        jPanel9.add(jScrollPane1, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 20, 1050, 370));

        btnCrearReporte.setBackground(new java.awt.Color(120, 113, 109));
        btnCrearReporte.setFont(new java.awt.Font("Microsoft Yi Baiti", 1, 24)); // NOI18N
        btnCrearReporte.setForeground(new java.awt.Color(255, 255, 255));
        btnCrearReporte.setText("crear reportes");
        btnCrearReporte.setBorderPainted(false);
        btnCrearReporte.setContentAreaFilled(false);
        btnCrearReporte.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        btnCrearReporte.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        btnCrearReporte.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnCrearReporteActionPerformed(evt);
            }
        });
        jPanel9.add(btnCrearReporte, new org.netbeans.lib.awtextra.AbsoluteConstraints(880, 400, 180, -1));

        getContentPane().add(jPanel9, new org.netbeans.lib.awtextra.AbsoluteConstraints(360, 490, 1070, 450));

        jPanel2.setBackground(new java.awt.Color(11, 114, 133));
        jPanel2.setPreferredSize(new java.awt.Dimension(360, 140));
        jPanel2.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        btnAgregar.setBackground(new java.awt.Color(8, 102, 0));
        btnAgregar.setFont(new java.awt.Font("Microsoft Yi Baiti", 1, 24)); // NOI18N
        btnAgregar.setForeground(new java.awt.Color(255, 255, 255));
        btnAgregar.setText("agregar");
        btnAgregar.setBorderPainted(false);
        btnAgregar.setContentAreaFilled(false);
        btnAgregar.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        btnAgregar.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        btnAgregar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnAgregarActionPerformed(evt);
            }
        });
        jPanel2.add(btnAgregar, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 340, 120, -1));

        btnCancelar.setBackground(new java.awt.Color(8, 102, 0));
        btnCancelar.setFont(new java.awt.Font("Microsoft Yi Baiti", 1, 24)); // NOI18N
        btnCancelar.setForeground(new java.awt.Color(255, 255, 255));
        btnCancelar.setText("cancelar");
        btnCancelar.setBorderPainted(false);
        btnCancelar.setContentAreaFilled(false);
        btnCancelar.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        btnCancelar.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        btnCancelar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnCancelarActionPerformed(evt);
            }
        });
        jPanel2.add(btnCancelar, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 380, 120, -1));

        getContentPane().add(jPanel2, new org.netbeans.lib.awtextra.AbsoluteConstraints(1070, 50, 360, 440));

        jPanel5.setBackground(new java.awt.Color(85, 74, 70));

        jLabel4.setFont(new java.awt.Font("Leelawadee", 1, 48)); // NOI18N
        jLabel4.setForeground(new java.awt.Color(255, 255, 255));
        jLabel4.setText("CONTEO DIARIO");

        jLabel5.setBackground(new java.awt.Color(255, 255, 255));
        jLabel5.setFont(new java.awt.Font("Microsoft Yi Baiti", 1, 24)); // NOI18N
        jLabel5.setForeground(new java.awt.Color(255, 255, 255));
        jLabel5.setText("SALIR");
        jLabel5.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        jLabel5.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jLabel5MouseClicked(evt);
            }
        });

        javax.swing.GroupLayout jPanel5Layout = new javax.swing.GroupLayout(jPanel5);
        jPanel5.setLayout(jPanel5Layout);
        jPanel5Layout.setHorizontalGroup(
            jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel5Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jLabel4)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 980, Short.MAX_VALUE)
                .addComponent(jLabel5)
                .addContainerGap())
        );
        jPanel5Layout.setVerticalGroup(
            jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel5Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jLabel5)
                .addContainerGap(24, Short.MAX_VALUE))
            .addGroup(jPanel5Layout.createSequentialGroup()
                .addComponent(jLabel4)
                .addGap(0, 0, Short.MAX_VALUE))
        );

        getContentPane().add(jPanel5, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 0, 1430, 60));

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void cmbCategoriasActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_cmbCategoriasActionPerformed
        try {
            String categoria = cmbCategorias.getSelectedItem().toString();
            new ConteoDiarioControl().tablaBuscarProductos(tblBuscarProductos, categoria);
        } catch (Exception ex) {
            System.out.println(ex.getMessage());
        }
    }//GEN-LAST:event_cmbCategoriasActionPerformed

    private void tblBuscarProductosMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_tblBuscarProductosMouseClicked
        try {
            int fila = tblBuscarProductos.getSelectedRow();

            if (fila >= 0) {
                txtCantidad.setEnabled(true);
            } else {
                txtCantidad.setEnabled(false);
            }
        } catch (Exception e) {
            System.out.println(e.getMessage());
        }
    }//GEN-LAST:event_tblBuscarProductosMouseClicked

    private void btnAgregarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnAgregarActionPerformed
        int fila = tblBuscarProductos.getSelectedRow();
        if (fila >= 0 && !txtCantidad.getText().trim().isEmpty()) {
            //agregar a tabla contados
            String datos[] = new String[4];
            datos[0] = tblBuscarProductos.getValueAt(fila, 0).toString();
            datos[1] = tblBuscarProductos.getValueAt(fila, 1).toString();
            datos[2] = tblBuscarProductos.getValueAt(fila, 2).toString();
            datos[3] = txtCantidad.getText();
            modelo.addRow(datos);
            tblContados.setModel(modelo);
            txtCantidad.setText("");
        } else {
            JOptionPane.showMessageDialog(getRootPane(), "DEBE INDICAR PRODUCTO Y CANTIDAD");
        }
    }//GEN-LAST:event_btnAgregarActionPerformed

    private void btnCancelarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnCancelarActionPerformed
        tblBuscarProductos.clearSelection();
        txtCantidad.setText("");
        txtCantidad.setEnabled(false);
    }//GEN-LAST:event_btnCancelarActionPerformed

    private void btnCrearReporteActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnCrearReporteActionPerformed
        ConteosPorFecha.setVisible(true);
        ConteosPorFecha.setBounds(350, 200, 750, 390);
    }//GEN-LAST:event_btnCrearReporteActionPerformed

    private void btnGuardarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnGuardarActionPerformed
        if (tblContados.getRowCount() > 0) {
            //validar si ya se realizo la cuenta
            int opc = JOptionPane.showConfirmDialog(null, "¿DESEA GUARDAR LA LISTA?", "GUARDAR CONTEO " + new ManejadorFechas().getFechaActual(), JOptionPane.YES_NO_OPTION);
            if (opc == 0) { //verdadero
                int c = 0;
                try {
                    for (int i = 0; i < tblContados.getRowCount(); i++) {
                        ConteoProducto cp = new ConteoProducto();
                        cp.setIdUsuario(new UsuarioDAO().getIdUsuario(lblUsuario.getText()));
                        cp.setIdProducto(Integer.parseInt(tblContados.getValueAt(i, 0).toString()));
                        cp.setIdPresentacion(new PresentacionDAO().getIdPresentacion(tblContados.getValueAt(i, 2).toString()));
                        cp.setStock(Integer.parseInt(tblContados.getValueAt(i, 3).toString()));
                        new ConteoProductoDAO().Registrar(cp);
                        c++;
                    }
                    if (c>0) {
                        JOptionPane.showMessageDialog(getRootPane(), "SE REGISTRO EL CONTEO EXITOSAMENTE");
                        parametros.put("fecha", lblFecha.getText());
                        mrv = new MyiReportVisor(System.getProperty("user.dir") + "\\reportes\\ConteoProductos.jrxml", parametros, new ColumnasTablas().getPageSize(tblContados));
                        mrv.setNombreArchivo("Conteo"+lblFecha.getText());
                        mrv.exportarAPdf();
                        mrv.dispose();
                    }
                } catch (Exception ex) {
                    System.out.println(ex.getMessage());
                }
            } else {//falso
            }
        } else {
            JOptionPane.showMessageDialog(getRootPane(), "NO SE PUEDE REGISTRAR UN CONTEO VACIO, INGRESE PRODUCTOS CONTADOS");
        }
    }//GEN-LAST:event_btnGuardarActionPerformed

    private void btnQuitarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnQuitarActionPerformed
        int fila = tblContados.getSelectedRow();
        if (fila >= 0) {
            modelo = (DefaultTableModel) tblContados.getModel();
            modelo.removeRow(fila);
        } else {
            JOptionPane.showMessageDialog(getRootPane(), "DEBE INDICAR EL PRODUCTO QUE DESEA QUITAR");
        }
    }//GEN-LAST:event_btnQuitarActionPerformed

    private void jLabel5MouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jLabel5MouseClicked
        dispose();
    }//GEN-LAST:event_jLabel5MouseClicked

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton1ActionPerformed
        JOptionPane.showMessageDialog(getRootPane(), new FormatoFechas().FormatoFec(jdcFechas));
    }//GEN-LAST:event_jButton1ActionPerformed


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JDialog ConteosPorFecha;
    private javax.swing.JButton btnAgregar;
    private javax.swing.JButton btnCancelar;
    private javax.swing.JButton btnCrearReporte;
    private javax.swing.JButton btnGuardar;
    private javax.swing.JButton btnLimpiar;
    private javax.swing.JButton btnQuitar;
    private javax.swing.JComboBox<String> cmbCategorias;
    private javax.swing.JButton jButton1;
    private javax.swing.JButton jButton6;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel8;
    private javax.swing.JLabel jLabel9;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JPanel jPanel3;
    private javax.swing.JPanel jPanel4;
    private javax.swing.JPanel jPanel5;
    private javax.swing.JPanel jPanel9;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JScrollPane jScrollPane3;
    private javax.swing.JTextArea jTextArea1;
    private com.toedter.calendar.JDateChooser jdcFechas;
    private javax.swing.JLabel jlabelf;
    private javax.swing.JLabel jlabelh;
    private javax.swing.JLabel jlabelu;
    private javax.swing.JLabel lblFecha;
    private javax.swing.JLabel lblHora;
    private javax.swing.JLabel lblUsuario;
    private javax.swing.JTable tblBuscarProductos;
    private javax.swing.JTable tblContados;
    private javax.swing.JTextField txtCantidad;
    // End of variables declaration//GEN-END:variables
}
